<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--    Bootstrap CSS Link-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <!--    Bootstrap JS Link-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
          crossorigin="anonymous"></script>
  <!--    CSS Link-->
  <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/style.css}" />
  <!--    Google Fonts Link of Navbar-Brand -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@900&display=swap" rel="stylesheet">
  <!--Font Awesome Link    -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <title>ToyDoc</title>




</head>

<body>
<div th:replace="~{fragments/navbar :: header}">Hier komt de navbar</div>


<div class="container mt-3">
  <div class="row">

    <div class="d-flex justify-content-center align-items-center flex-column col-5 ">
      <div>
        <img class="donate-img" th:src="@{/css/donate.jpg}" alt="party-image"  />
      </div>
      <div>
        <h4 class="donate-text">Your donation can make a huge impact in the lives of those in need.We appreciate your generosity and support in helping us create a better world for all.</h4>
      </div>
    </div>

    <div class="col-2">

    </div>
    <!--  Form 1-->
    <div class="form col-5" th:if="${planForm}">
      <form th:action="@{/donation/plan}" class="needs-validation" name="myForm"  novalidate  onsubmit="requiredFunction()">
        <h3 class="mt-3">How would you like to donate?</h3>

        <div class="radio mt-4">
          <input label="Monthly" type="radio" id="monthly" name="plan" value="Monthly" th:checked="${plan}">
          <input label="One-off" type="radio" id="yearly" name="plan" value="One-off" >
        </div>

        <div class="radio mt-4">
          <input label="25 &euro;" type="radio" id="25" name="amount" value="25" class="amount">
          <input label="50 &euro;" type="radio" id="50" name="amount" value="50" class="amount">
          <input label="100 &euro;" type="radio" id="100" name="amount" value="100" th:checked="${amount}"   >
        </div>



        <div class="number mt-4">
          <label for="other-amount" class="form-label " >Choose your own amount(&euro;)</label><br>
          <input id="other-amount" class="form-control" name="ownAmount" type="number" placeholder="Choose your own amount" >
        </div>

        <div class="mt-3 form-check">
          <input class="form-check-input" type="checkbox" value="true" name="anonymous" id="anonymousCheck">
          <label for="anonymousCheck">Donate with anonymous</label>
        </div>

        <div id="amount-feedback" class="text-danger">

        </div>
        <div>
          <input type="submit"  value="Donate"  class="btn btn-donate mt-4 btn-lg btn-block">
        </div>
      </form>
    </div>

    <div class="form col-5" th:if="${openContactInfo}" >
      <h3 class="mt-3">Personal Info</h3>
      <form th:action="@{/donation/info}" class="needs-validation"  novalidate >
        <div class="mt-3">
          <label for="select-title" class="form-label">Title</label>
          <select id="select-title" class="form-control">
            <option selected>-Select-</option>
            <option value="miss" >-Miss-</option>
            <option value="mrs">-Mrs-</option>
            <option value="mr">-Mr-</option>
          </select>
        </div>

        <div class="mt-3">
          <label for="first-name" class="form-label">First Name</label>
          <input id="first-name" type="text" name="firstName" class="form-control " th:value="${localFirstName}" required>
          <div class="valid-feedback">
            Looks good!
          </div>

        </div>

        <div class="mt-3">
          <label for="last-name" class="form-label">Last Name</label>
          <input id="last-name" type="text" name="lastName" class="form-control " th:value="${localLastName}" required >
          <div class="valid-feedback">
            Looks good!
          </div>
        </div>

        <div class="mt-3">
          <label for="mail" class="form-label">Email</label>
          <input id="mail" type="email" name="email" class="form-control  " th:value="${localEmail}" required>
          <div class="invalid-feedback" >
            Please provide a valid username.
          </div>

        </div>

        <div class="mt-3">
          <label for="phone" class="form-label">Phone Number</label>
          <input id="phone" type="text" class="form-control " name="phoneNumber" placeholder="+32 999-999-999" th:value="${localPhoneNumber}">

          <div class="invalid-feedback">
            Please provide a valid phone number.
          </div>
        </div>

        <div class="mt-3 form-check">
          <input class="form-check-input " type="checkbox" value="" id="invalidCheck2" required>
          <label class="form-check-label" for="invalidCheck2" >
            By submitting this form, you acknowledge you are aware that your personal data will be used in line with our Privacy Policy. You have the right to withdraw your consent at any time by contacting us.
          </label>
          <div class="invalid-feedback">
            You must agree before submitting.
          </div>
        </div>

        <div>
          <input type="submit" value="Next" th:href="@{/donation/checkout}" class="btn btn-donate mt-4 btn-lg btn-block">
        </div>

      </form>
    </div>

    <div class="form col-5" th:if="${openCheckout}">
      <h3 class="mt-3">Card Details</h3>
      <form th:action="@{/donation/checkout}" class="needs-validation" novalidate >
        <div class="mt-3">
          <label for="card-holder" class="form-label">Card Holder</label>
          <input id="card-holder" type="text" class="form-control" name="cardHolder"  placeholder="Barry Alleen" required>
          <div class="valid-feedback">
            Looks good!
          </div>
        </div>

        <div class="mt-3">
          <label for="card-number" class="form-label">Card Number</label>
          <input id="card-number" type="text" class="form-control" name="cardNumber" placeholder="1234 5678 9435 1678" maxlength="16" required>
          <p><small>It must contain 16 digits</small></p>
          <div class="invalid-feedback">
            Please provide a valid card number.It must contain 16 digits .
          </div>
        </div>

        <div class="d-flex">
          <div class="mt-3">
            <label for="expiry" class="form-label">Expiry</label>
            <input id="expiry" type="text" class="form-control" name="expiry" placeholder="MM/YY" required>

            <div class="valid-feedback">
              Looks good!
            </div>
          </div>

          <div class="mt-3">
            <label for="cvv" class="form-label">CVV</label>
            <input id="cvv" type="password" class="form-control " name="cvv" placeholder="***" maxlength="3" required>
            <p><small>It must contain 3 digits</small></p>
            <div class="valid-feedback">
              Looks good!
            </div>
          </div>
        </div>

        <div>
          <input  type="submit" value="Donate" class="btn btn-donate mt-4 btn-lg btn-block">
        </div>


      </form>


    </div>

    <div class="form col-5" th:if="${openSave}" th:object="${donation}">
      <form th:action="@{/donation/save}" method="post">

        <div th:if="${invalidCard}" class="mt-3">
          <p>There is no credit/debit card like this. Please make sure that you write correct card details</p>
          <div>
            <a th:href="@{/donation}"  class="btn btn-donate mt-4 btn-lg btn-block"><- Edit donation Information</a>
          </div>
        </div>

        <div th:unless="${invalidCard}">
          <h3 class="mt-3">Summary of Donation Information</h3>
          <p th:text="${localPlan}"></p>
          <p th:text="${localAmount}"></p>
          <p th:text="${!isAnoniem} ? ${localFirstName + '' +  localLastName}  : 'Anoniem' "></p>
          <p th:text="${!isAnoniem} ? ${localEmail}  : 'Anoniem' "></p>
          <p th:text="${localSecurityCardNumber}"></p>
          <div>
            <input  type="submit" value="Donate Now" class="btn btn-donate mt-4 btn-lg btn-block">
          </div>
        </div>

      </form>
    </div>

  </div>
</div>


<div th:replace="~{fragments/footer :: footer}"></div>

<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (function () {
    'use strict'

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    var forms = document.querySelectorAll('.needs-validation')

    // Loop over them and prevent submission
    Array.prototype.slice.call(forms)
            .forEach(function (form) {
              form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                  event.preventDefault()
                  event.stopPropagation()
                }

                form.classList.add('was-validated')
              }, false)
            })
  })()
</script>


<script>
  function requiredFunction(){
    let x = document.getElementById("other-amount").value;
    let z = document.getElementById("100").value;
    let y = document.getElementById("100");
    if((x == "")){
      y.setAttribute('required','');
      document.getElementById("amount-feedback").innerHTML = 'Please choose a amount or enter your own amount';
    }else{
      y.removeAttribute('required','');
    }
  }
</script>


<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


<script src="/JS/toys.js"></script>


</body>
</html>